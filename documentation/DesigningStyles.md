# <a name="part0"></a>Проектирование стилей
В XF2 мы ввели совершенно новый способ построения и редактирования стилей под названием "Режим дизайнера". Режим дизайнера - это набор CLI инструментов, которые позволяют изменять определенные шаблоны в стиле непосредственно в файловой системе. Он также выводит различные метаданные и информацию о свойствах стиля, что полезно для управления версиями и совместной работой.

## <a name="part1"></a>Включение режима дизайнера
Первый шаг к включению режима дизайнера - внести в `config.php` запись:
```php
$config['designer']['enabled'] = true;
```
При необходимости можно указать другой путь для файлов режима дизайнера, которые должны существовать в файловой системе. Ниже представлено расположение по умолчанию. Чтобы изменить расположение, добавьте в `config.php` следующую запись и соответственно измените путь:
```php
$config['designer']['basePath'] = 'src/styles';
```

## <a name="part2"></a>Включение режима дизайнера для стиля
Режим дизайнера должен быть явно включен для каждого стиля. Чтобы включить режим дизайнера для стиля, используйте следующую CLI команду и укажите идентификатор стиля, и выберите "ID режима дизайнера":
```bash
php cmd.php xf-designer:enable [style_id] [designer_mode_id]
```
ID режима дизайнера - это идентификатор, который будет использоваться для будущих команд, связанных с режимом дизайнера. После включения текущие измененные компоненты стиля будут экспортированы в директории `[basePath]/[designer_mode_id]`.

При включении режима дизайнера для этого стиля, если этот каталог уже существует, вам будет предложено выбрать, следует ли перезаписать текущее содержимое этого каталога из стиля или следует перезаписать текущий стиль из текущего содержимого этого каталога.

## <a name="part3"></a>Отключение режима дизайнера для стиля
Чтобы отключить режим дизайнера для стиля, просто выполните следующую CLI команду:
```bash
php cmd.php xf-designer:disable [designer_mode_id]
```
Чтобы удалить данные, можно выполнить ту же команду с параметром `--clear`:
```bash
php cmd.php xf-designer:disable [designer_mode_id] --clear
```

## <a name="part4"></a>Что выводится и где?
Важно помнить, что стиль в XF состоит только из того, что *изменяется в этом стиле*. Это означает, что выходные данные режима дизайнера будут состоять только из того, что было изменено в этом стиле. Шаблоны и свойства стиля, измененные в Родительском стиле, не выводятся.

### <a name="part5"></a>Шаблоны
Шаблоны стиля будут находится в директории `[basePath]/[designer_mode_id]/templates`. В этой директории вы можете видеть другие каталоги для каждого типа (например, admin, email и public).

Шаблоны будут выводиться в формате HTML и доступны для непосредственного редактирования в файловой системе. Изменения, внесенные в файловой системе, импортируются и компилируются при загрузке шаблона на страницу. Аналогично, вы можете вернуть шаблон, удалив его из файловой системы (если он был ранее изменен).

### <a name="part6"></a>Группы и параметры стилей
Параметры стиля и группы будут находится в директориях `[basePath]/[designer_mode_id]/style_properties` и `[basePath]/[designer_mode_id]/style_property_groups` соответсвенно. Они экспортируются в формате JSON и служат полезным способом для отслеживания изменений в этих файлах с помощью системы управления версиями.

Не рекомендуется изменять эти файлы напрямую, так как изменения в них *не* будут импортироваться автоматически, как в шаблонах.

## <a name="part7"></a>Изменение конкретного шаблона
Принимая во внимание, что стиль представляет собой компоненты, которые изменяются только в этом стиле, когда включен режим дизайнера, файловая система также будет содержать только компоненты, которые изменяются только в этом стиле. Невозможно будет вывести эффективную версию каждого шаблона и свойства стиля.

Чтобы пометить шаблон как измененный в стиле, вы можете сделать это обычным способом, отредактировав его в админ-панели. Шаблоны и свойства стиля, измененные в админ-панели, будут автоматически записаны в файловую систему, если включен режим дизайнера. Однако, было бы более удобно модифицировать "коснуться" шаблона с помощью CLI команды:
```bash
php cmd.php xf-designer:touch_template [designer_mode_id] [template_type:template_title]
```
Пока указанный шаблон существует в Родительском или главном стиле, он будет скопирован в текущий стиль и выведен в файловую систему.

Если вы хотите создать новый шаблон в своем стиле (который не существует в любом другом стиле в дереве), можно использовать ту же команду, но нужно просто передать параметр `--custom`:
```bash
php cmd.php xf-designer:touch_template [designer_mode_id] [template_type:template_title] --custom
```

## <a name="part8"></a>Другие полезные команды
Существует ряд других полезных команд, связанных с режимом дизайнера:

### <a name="part9"></a>Экспорт в базу данных
Эта команда обычно выполняется автоматически, если для стиля включен режим дизайнера, но если по какой-то причине вы хотите перезаписать копию файловой системы тем, что в настоящее время находится в базе данных, можно выполнить следующую команду:
```bash
php cmd.php xf-designer:export [designer_mode_id]
```
Также можно экспортировать только определенные типы, например, `xf-designer:export-templates`.

### <a name="part10"></a>Импорт в файловую систему
Эта команда перезапишет копию базы данных стиля тем, что находится в файловой системе:
```bash
php cmd.php xf-designer:import [designer_mode_id]
```
Также можно экспортировать только определенные типы, например, `xf-designer:import-templates`.

### <a name="part11"></a>Синхронизация шаблонов
Эта команда аналогична импорту шаблонов (см. выше), но вместо перезаписи всего она будет импортировать только шаблоны и перекомпилировать их, если метаданные изменились. Он также будет применять обновления номера версии соответственно.
```bash
php cmd.php xf-designer:sync-templates [designer_mode_id]
```

### <a name="part12"></a>Обратный шаблон
Эту команду можно использовать для возврата шаблона, фактически удалив пользовательскую версию из текущего стиля.
```bash
php cmd.php xf-designer:revert-template [designer_mode_id] [template_type:template_title]
```
Также можно инициировать возврат, удалив шаблон из файловой системы.